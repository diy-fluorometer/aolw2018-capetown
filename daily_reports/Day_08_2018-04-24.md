# Plan for the day

* Ale: Keep working on assembly instructions
* Lisa: Figure out bug in TSL2591 sensor code and fix it
* Do measurements with DNA ladder + fluorescent dye

# What we did today

## Bug in TSL2591 sensor code

The TSL2591 sensor offers four different gain settings:

| LOW    | 1x    |
| MEDIUM | 25x   |
| HIGH   | 428x  |
| MAX    | 9876x |

If there is very little light, the sensor might fail to return a value at the gain setting LOW, but a useable value at gain setting HIGH, for example. Under most conditions, the sensor returns useable values at several gain settings.
For example, when measuring with just the empty sensor box, we get the following values:

| Value | Gain level |
| -----:| ---------- |
| 14563 | MAX        |
| 631   | HIGH       |
| 37    | MED        |
| 1     | LOW        |

I thought it desirable to map the readings to a single scale, namely the one associated with the MAX gain setting. It turned out that the way I was trying to do that was wrong, hence the strange sensor readings. There's also not an easy fix, because there is no way you can map a value obtained at gain level LOW to a precise value on the MAX scale. Any value at LOW would map to entire range of values on the MAX scale.
So for today's measurements, I settled for recording the readings at all gain settings for each measurement and then sort through that data during the analysis stage.
One option would be to use the Lux calculation from the [Adafruit TSL2591 sensor library](https://github.com/adafruit/Adafruit_TSL2591_Library/blob/master/Adafruit_TSL2591.cpp). We can still do that later based on the data we have.
Note that we only record the data from the sensor's Channel 0 (IR+Visible), and ignore Channel 1 (IR).

## Measurements with DNA ladder + fluorescent dye


## Pulsing LED / Cellphone-only approach

Since the measurements with the textmarker where promissing we assembled the circuit described on day 5 withing an old fluorometer-housing. 
to measure the dilution series Roberts cell phone (Huawei P10) was connected to the "Cell-phone-only-fluorometer". To play the frequency the LED is modulatred with we used the signal generator app:(https://play.google.com/store/apps/details?id=com.xyz.signal). it Keeps playing even if an other app is opened. 
To measure the Signal we used the FFT app: (https://play.google.com/store/apps/details?id=org.intoorbit.spectrum)

The seettings where chosen as seen in the screenshot:

![alt text](https://raw.githubusercontent.com/diy-fluorometer/aolw2018-capetown/master/sketches/chart_dna_cell.png "loudnes of the 479 Hz peak in dependence of the DNA concentration ")
